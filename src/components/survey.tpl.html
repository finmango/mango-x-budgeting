<div id="mangox-budget-survey">
    <style>
        .animated {
            transition: all 500ms ease-in-out;
        }

        .screen {
            height: 0;
            opacity: 0;
            overflow: hidden;
            max-width: 600px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .screen-visible {
            height: auto;
            opacity: 1;
            overflow: initial;
        }

        .story-button {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
        }
        .button2 {background-color: #4CAF50;} /* Green */
        .button3 {background-color: #FFA500;} /* Orange */ 
        
    </style>

    <div class="screen animated" id="mangox-budget-screen-1">
        <h2 class="centered" style="text-transform: none; font-size: xx-large;">
            BUDGET SIMULATOR
        </h2>
        <p class="centered one" style="text-align: justify;">
            Welcome to the <b>FinMango Budget SIMULATOR!</b> 
            A <b>budget</b> is a plan for every dollar you have for a defined time period (usually a month), 
            and <b>budgeting</b> is a essential life skill for anyone of any background, 
            age, and net worth in order to achieve financial freedom. 
            <div class="spacer"></div>
            This budgeting simulator will enable you to organize and visualize your spending 
            and see if you are on track to meet your financial goals.           
        </p>
        <div class="spacer"></div>
    </div> 

    <div class="screen animated" id="mangox-budget-screen-2">
        <div>
            <h2 class="centered" style="text-transform: uppercase; font-size: x-large;">
                The 50/30/20 Rule of Budgeting
            </h2>
            <p class="centered one" style="text-align: justify;">
                A common rule of thumb for a balanced budget is that 
                you should spend <b>50%</b> of your monthly income on necessities, <b>30%</b> on wants and 
                <b>20%</b> to save and pay off debt. 
                In this simulator, we use this <b>50-30-20 rule</b> to help you assess how healthy your budget is!   
                <div class="spacer"></div>
                Please enter your <b>estimated net take home pay</b> per month below. This is the amount remaining
                after all deduductions (federal, state and local income tax, Social Security and Medicare contributions, retirement account contributions, and medical, dental and other insurance premiums) 
                are taken out. 
            </p>
        </div>
        <div class="centered flex one">
            <label for="age">
                My estimated net take home pay per month is: 
            </label>
            <input type="number" pattern="/d*" id="age" min="200" value="200" />
            <span class="centered" style="font-size: small;"> 
            </span>
        </div>
        <div class="spacer"></div>
        <div class="spacer"></div>
    </div>

    <div class="screen animated" id="mangox-budget-screen-3">
        <div>
            <h2 class="centered" style="text-transform: uppercase; font-size: x-large;">
                Cost Categories (What am I spending my money on?!)
            </h2>
            <p class="centered one" style="text-align: justify;">
                   
                <div class="spacer"></div>
                
            </p>
        </div>
        <div class="centered flex one">
            <label for="age">
                Food
            </label>
            <input type="number" pattern="/d*" id="age" min="200" value="200" />
            <span class="centered" style="font-size: small;"> 
            </span>
        </div>
        <div class="spacer"></div>
        <div class="spacer"></div>
    </div>


    <div class="screen animated" id="nav">
        <div class="centered flex one">
            <button id="next">CONTINUE</button>
            <button onclick="window.location.reload()">START OVER</button>
            <div class="spacer"></div>
            <button class="story-button button2" onclick="window.open('https://finlit.finmango.org/importance-of-budgeting/','_blank')">Mango Story ðŸ¥­: The Importance of Budgeting</button>
            <button class="story-button button2" onclick="window.open('https://stories.finmango.org/','_blank')">All Mango Stories ðŸ¥­: Bite-Sized Lessons</button>


        </div>
    </div>

    <script async>
        (async function () {
            const rootElement = document.currentScript.parentElement;

            let screenIdx = 0;
            const screens = [].slice.call(rootElement.querySelectorAll('div.screen'), 0, -1);
            rootElement.querySelector('#next').addEventListener('click', event => {
                if (screenIdx + 1 < screens.length) {
                    const currScreen = screens[screenIdx];
                    const nextScreen = screens[screenIdx + 1];

                    currScreen.classList.remove('screen-visible');
                    nextScreen.classList.add('screen-visible');

                    screenIdx++;
                } else {
                    const formElements = [].slice.call(rootElement.querySelectorAll('input, select'));
                    const path = window.location.pathname.includes('/embed/') ? '{{root}}/embed/chart/' : '{{root}}/view/chart/';
                    const nextUrl = new URL(path, window.location.href);
                    formElements.forEach(elem => {
                        nextUrl.searchParams.set(elem.id, elem.value);
                    });
                    window.location = nextUrl;
                }
            });

            rootElement.querySelector('div.screen:first-of-type').classList.add('screen-visible');
            rootElement.querySelector('#nav').classList.add('screen-visible');
        })();
    </script>
</div>